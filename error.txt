#include <QPainter>
#include "RocketSceneFinal.h"

RocketSceneFinal::RocketSceneFinal(QWidget *parent){
    launchPadOffSet = 30;
    rotation = 0.0;
    x = -width()/2 + launchPadOffSet + 25;
    y = 46;

}

void RocketSceneFinal::paintEvent(QPaintEvent *evnt){
    QPainter painter(this);
    painter.translate(width()/2, height());
    painter.scale(1, -1);

    painter.setBrush(Qt::black);
    painter.drawRect(-width()/2, height(), width(), height());

    painter.setBrush(Qt::blue);
    painter.drawRect(-width()/2 + launchPadOffSet, 10, 50, 10);
    painter.drawRect(width()/2 - launchPadOffSet, 10, 50, 10);

    painter.save();
    painter.translate(x, y);
    painter.translate(0, -15);
    painter.rotate(rotation);
    painter.translate(0, 15);
    paintRocket(&painter);

    painter.restore();



}

void RocketSceneFinal::paintRocket(QPainter *painter) {
    // Рисуем основное тело
    painter->setBrush(Qt::red);
    painter->drawRect(-12, -48, 24, 48);

    // Рисуем нос ракеты
    QPolygonF nose;
    nose << QPointF(-12, -48) << QPointF(12, -48) << QPointF(0, -68);
    painter->setBrush(Qt::gray);
    painter->drawPolygon(nose);

    // Рисуем двигатели
    painter->setBrush(Qt::yellow);
    painter->drawRect(-10, 42, 6, 6);
    painter->drawRect(4, 42, 6, 6);

    // Дополнительные элементы
    painter->setBrush(Qt::darkGray);
    painter->drawEllipse(QPointF(0, 20), 4, 6);
}

